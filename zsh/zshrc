##
## Environment variables
##

export DOTFILES="$HOME/.dotfiles"

# Set the PATH environment variable
export PATH="$HOME/bin:$DOTFILES/bin:$HOME/.local/bin/:$PATH"

##
## Plugins
##

# Automaticall load zplug if it doesn't exist
if [[ ! -d $HOME/.zplug ]] ; then
    git clone https://github.com/zplug/zplug $HOME/.zplug
fi

source $HOME/.zplug/init.zsh

#zplug "lib/completion", from:oh-my-zsh

zplug "zsh-users/zsh-syntax-highlighting", from:github, defer:3
zplug "zsh-users/zsh-history-substring-search", from:github, defer:3
zplug "zsh-users/zsh-completions", from:github, defer:3

zplug "agnoster/agnoster-zsh-theme", from:github, as:theme

if ! zplug check --verbose ; then
    printf "Install zplug plugins? [y/N]: "
    if read -q ; then
        echo ; zplug install
    fi
fi

zplug load

##
## Load zsh modules
##
for file ($DOTFILES/zsh/*.zsh(N)); do
    source $file
done

##
## Allow for machine-specific local changes
##
[[ -f $HOME/.zshrc.local ]] && source $HOME/.zshrc.local

